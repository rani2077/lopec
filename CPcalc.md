# 로스트아크 인게임 시뮬레이터 기획서

## 📋 개요
로스트아크의 인게임 전투력 계산 시스템을 분석하고, 이를 기반으로 한 시뮬레이터 구현 방안

---

## 🔍 문제 분석

### 1. 전투력 계산의 핵심
- 로스트아크의 인게임 전투력은 **"기본 공격력 × 288"** 을 첫 번째 계수로 사용
- 정확한 전투력 계산 및 시뮬레이션을 위해서는 **캐릭터의 기본 공격력을 정확히 파악**해야 함

### 2. 기존 방법의 한계
- 현재로는 캐릭터의 기본 공격력을 직접 계산하는 방법이 없음
- 기본 공격력에는 각종 내실 요소가 포함되어 있기 때문
- 만찬의 영향을 받아 계산이 불가능함

---

## 💡 해결방안

### 역산을 통한 기본 공격력 추출
1. **API로 캐릭터의 실제 전투력 반환**
2. **전투력 계산 로직을 역순으로 적용**하여 기본 공격력 추출
3. **추출된 기본 공격력을 기반**으로 전투력 시뮬레이션 구현

---

## 🧮 전투력 계산 공식

```
전투력 = (기본 공격력 × 288) × 전투레벨 × 무기품질 × 아크패시브 × 카르마 × 각인 × 엘릭서 세트효과 × 엘릭서 연성효과 × 장신구 × 스탯 × 팔찌옵션 × 보석 × 초월 × 카드 × 방범대
```

### 구현 프로세스
1. **위 계산식의 모든 항목들을 필터화**하여 구체적인 값으로 변환
2. **API 데이터에서 해당 캐릭터의 전투력 증가 요소를 파싱**
3. **역산을 통해 기본 공격력 도출**

---

## 🎯 시뮬레이터 동작 원리

### 예상치 계산
- 기본 공격력을 기반으로 사용자 입력값에 따라 전투력을 자체 계산
- **"예상치"** 로 표시하는 이유: 실제 인게임의 소숫점 처리 방식 등을 정확히 파악할 수 없어 약간의 오차가 발생할 수 있음

---

## 🔧 현재 구현 상황

### 기존 시스템
- `trans-value.js`에서 전투력 계산에 필요한 대부분의 요소를 파싱 중
- 파싱된 값은 `filter.js`에 하드코딩된 수치와 매칭되어 점수 계산에 활용
- 파싱된 요소 → 필터 매칭 → 오리진 객체 저장 → calculator에서 최종 계산

### 구현 예시
```javascript
// 현재 구조
{ name: "추가 피해  +2.60%", attr: "AddDamagePer", value: 2.6 }

// 개선 방안
{ name: "추가 피해  +2.60%", attr: "AddDamagePer", value: 2.6, combatPowerValue: 2.6 }
```

---

## 📌 개선 방안

### 권장 구현 방식
1. **기존 파싱 시스템 활용**: 대부분의 값이 이미 파싱되고 있음
2. **전투력 계산용 새로운 객체 생성**: 각 요소들을 전투력 계산에 특화된 형태로 재정리
3. **통합 계산 시스템**: 스펙포인트 계산과 전투력 계산을 병행 처리

### 구현 우선순위
1. 🔴 **High**: 기본 공격력 역산 로직 구현
2. 🟡 **Medium**: 전투력 계산 공식 검증 및 최적화
3. 🟢 **Low**: UI/UX 개선 및 사용자 편의성 향상
