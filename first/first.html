<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>카제로스 The First 현황판 </title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <script>
    const isTheme = localStorage.getItem("darkMode");
    console.log(isTheme)
    if (isTheme === "enabled") {
      document.documentElement.classList.add("dark-mode");
    }
  </script>

  <div class="app">
    <div class="page-space"></div>
    <h2 class="page-title">카제로스 더 퍼스트 현황</h2>
    <div class="board-container">
      <div class="last-updated" id="lastUpdated"></div>
      <div class="board">
        <header>
          <div class="phase-switch">
            <button class="phase-btn" data-phase="4막">4막</button>
            <button class="phase-btn" data-phase="종막">종막</button>
          </div>
          <div class="header-note">공격대 클릭시 공격대 정보를 확인할 수 있습니다!</div>
          <div class="actions">
            <button class="btn" id="reportProgressBtn">진도 제보</button>
            <button class="btn" id="registerTeamBtn">공격대 등록</button>
            <button class="btn" id="correctionBtn">정정 요청</button>
          </div>
        </header>
        <main id="content"></main>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div id="modalTitle" class="modal-title"></div>
        <button class="modal-close" id="modalClose">닫기</button>
      </div>
      <div class="modal-body">

        <div id="tab-progress" class="tab-content">
          <div class="form">
            <div class="field">
              <div class="label-row">
                <div class="label">공격대 이름</div>
              </div>
              <select class="select" id="teamNameSelect"></select>
            </div>

            <div class="field">
              <div class="label">진도 현황</div>
              <div class="row-3">
                <select class="select" id="phaseSelect">
                  <option>4막</option>
                  <option>종막</option>
                </select>
                <select class="select" id="gateSelect">
                  <option>1관</option>
                  <option>2관</option>
                  <option class="gate-third" hidden>???</option>
                </select>
                <select class="select" id="lineSelect"></select>
              </div>
              <div class="hint" id="progressHint" style="color: red; display: none; margin-top: 4px;"></div>
            </div>

            <div class="field">
              <button class="btn-primary" id="submitProgress" disabled>제보하기</button>
            </div>
          </div>
        </div>

        <div id="tab-register" class="tab-content" style="display:none">
          <div class="form">
            <div class="field">
              <div class="notice">
                <div class="notice-title">로펙 카제로스 현황판 공격대 등록 안내</div>
                <ul>
                  <li>최소 한명은 방송을 켜고 진행하는 공대만 등록 가능합니다.</li>
                  <li>전문 스트리머일 필요는 없고, 일반인 공대도 방송만 켠다면 등록 가능합니다.</li>
                  <li>공대원 8명의 닉네임은 반드시 전부 등록되어야 합니다.</li>
                  <li>등록이 완료되었더라도, 이후 반려될 수 있습니다.</li>
                </ul>
              </div>
            </div>

            <div class="field" id="confirmNoticeContainer">
              <button class="btn-primary" id="confirmNoticeBtn" style="width: 100%;">확인했습니다.</button>
            </div>

            <div class="field" id="teamNameField">
              <div class="label-row">
                <div class="label">공격대 이름</div>
                <div class="hint">*풀네임</div>
              </div>
              <input class="input" id="registerTeamNameInput" type="text" placeholder="공격대 이름을 입력하세요" />
            </div>

            <div class="field" id="membersField">
              <div class="label-row">
                <div class="label">공격대 멤버</div>
                <div class="hint">*방송 주소는 최소 한명 이상만 입력하면 됩니다.</div>
              </div>
              <div class="members-grid" id="membersGrid"></div>
            </div>

            <div class="field" id="submitRegisterField">
              <button class="btn-primary" id="submitRegister" disabled>제보하기</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Correction Modal -->
  <div class="overlay" id="correctionOverlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="correctionModalTitle">
      <div class="modal-header">
        <div id="correctionModalTitle" class="modal-title">정보 정정 요청 안내</div>
        <button class="modal-close" id="correctionModalClose">닫기</button>
      </div>
      <div class="modal-body">
        <div class="correction-notice">
          <p>아래와 같은 사유로 정보 수정 혹은 삭제가 필요한 경우 문의 부탁드립니다.</p>
          <ul>
            <li>방송 링크 추가</li>
            <li>방송 링크 오류</li>
            <li>진도 정정</li>
            <li>공대원 변경</li>
            <li>캐릭터 변경</li>
            <li>그 외 기타 요청</li>
          </ul>
        </div>
        <a href="#" class="btn-primary" id="inquiryLink" target="_blank"
          style="text-align: center; display: block; text-decoration: none;">문의 하러 가기</a>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>